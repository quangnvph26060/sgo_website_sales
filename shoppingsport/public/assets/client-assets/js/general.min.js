function copyText(t) {
  if (navigator.clipboard)
    navigator.clipboard
      .writeText(t)
      .then(() => {
        alert_show("success", "Link: " + t);
      })
      .catch((t) => {
        console.error("KhĂ´ng thá»ƒ sao chĂ©p:", t);
      });
  else {
    const e = document.createElement("input");
    (e.value = t),
      document.body.appendChild(e),
      e.select(),
      document.execCommand("copy"),
      document.body.removeChild(e),
      alert_show("success", "Link: " + t);
  }
}
function validForm(t, e = "form-control") {
  var o = !0;
  return (
    $(".err_show").removeClass("active"),
    $("#" + t + " ." + e).each(function () {
      $(this).attr("name");
      if (
        ($(this)
          .css({ border: "1px solid #d5d5d5" })
          .css({ visibility: "visible" }),
        "" == $(this).val() &&
          ($(this).focus(),
          $(this).parent().find(".err_show.null").addClass("active"),
          $(this)
            .css({ border: "2px solid #dc1f26" })
            .css({ visibility: "visible" }),
          (o = !1)),
        "" == $(this).val() ||
          "email" != $(this).attr("name") ||
          isEmail($(this).val()) ||
          ($(this).parent().find(".err_show.email").addClass("active"),
          $(this)
            .css({ border: "2px solid #dc1f26" })
            .css({ visibility: "visible" }),
          (o = !1)),
        "" == $(this).val() ||
          "phone" != $(this).attr("name") ||
          isPhone($(this).val()) ||
          ($(this).parent().find(".err_show.phone").addClass("active"),
          $(this)
            .css({ border: "2px solid #dc1f26" })
            .css({ visibility: "visible" }),
          (o = !1)),
        0 == $(this).val() &&
          "product_name" == $(this).attr("name") &&
          ($(this).parent().find(".err_show").addClass("active"),
          $(this)
            .css({ border: "2px solid #dc1f26" })
            .css({ visibility: "visible" }),
          (o = !1)),
        0 == o)
      ) {
        var e = $("#" + t).position().top;
        $("html, body").animate({ scrollTop: e }, "slow");
      }
    }),
    o
  );
}
function setCookie(t, e, o) {
  var n = new Date();
  n.setTime(n.getTime() + 60 * o * 1e3),
    (document.cookie = t + "=" + e + ";path=/;expires=" + n.toUTCString());
}
function isEmail(t) {
  return /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(
    t
  );
}
function isPhone(t) {
  return /((09|03|07|08|05)+([0-9]{8})\b)/g.test(t);
}
function loadingBox(t = "open") {
  "open" == t
    ? $("#loading_box")
        .css({ visibility: "visible", opacity: 0 })
        .animate({ opacity: 1 }, 200)
    : $("#loading_box").animate({ opacity: 0 }, 200, function () {
        $("#loading_box").css("visibility", "hidden");
      });
}
function alert_show(t = "success", e = "") {
  $("#toast-container .toast").addClass("toast-" + t),
    $("#toast-container .toast-message_content").text(e),
    $("#toast-container").css("display", "block"),
    setTimeout(function () {
      $("#toast-container").css("display", "none"),
        $("#toast-container .toast").removeClass("toast-" + t),
        $("#toast-container .toast-message_content").text("");
    }, 6e3);
}
function update_url(t) {
  history.pushState(null, null, t);
}
function update_input_url(t) {
  $('input[name="current_url"]').val(t);
}
function getUrlParameter(t, e) {
  var o = new RegExp("[?&]" + e + "=([^&#]*)").exec(t);
  return null == o ? null : decodeURI(o[1]) || null;
}
function pushOrUpdate(t) {
  var e = new URL($('input[name="current_url"]').val());
  $.each(t, function (t, o) {
    e.searchParams.set(t, o);
  }),
    update_input_url(e.href);
}
function checkEmpty(t) {
  return null == t || "null" == t || null == t || "" == t || t == [];
}
function loadAjaxGetPaginate(t, e, o) {
  checkEmpty(o) && (o = "progress");
  var n = {
    beforeSend: function () {},
    success: function (t) {},
    error: function (t) {},
  };
  $.extend(n, e),
    $.ajax({
      headers: { "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content") },
      type: "POST",
      url: t,
      beforeSend: function () {
        loadingBox("open");
      },
      success: function (t) {
        loadingBox("close"), n.success(t);
      },
      error: function (t) {
        loadingBox("close"), alert_show("error", errorMessage), n.error(t);
      },
    });
}
function loadData(t = "progress", e = "", o = "", n = !0) {
  loadAjaxGetPaginate(
    $('input[name="current_url"]').val(),
    {
      beforeSend: function () {},
      success: function (t) {
        "products" == e &&
          $(".datas-top__wrap .count")
            .data("count", t.total)
            .attr("data-count", t.total)
            .text(t.total),
          $(".pagination").empty(),
          $(".pagination").append(t.pagination),
          n ||
            ($("html, body").animate(
              { scrollTop: $("#listdata").position().top },
              300
            ),
            $("#listdata").empty(),
            $("body .paginate_item").each(function () {
              let t = $(this).data("href"),
                e = getUrlParameter(t, "page"),
                o = t.split("?")[0] || t;
              (o += "#trang=" + e),
                window.location.href == o && $(this).addClass("active");
            })),
          $("#listdata").append(t.html),
          window.onErrorImage();
      },
      error: function (t) {},
    },
    t
  );
}
function closePopup(t) {
  $(".fixed").removeClass("active"), $("#" + t).removeClass("active");
}
function openPopup(t) {
  $(".fixed").addClass("active"), $("#" + t).addClass("active");
}
function utf8_to_b64(t) {
  return window.btoa(unescape(encodeURIComponent(t)));
}
function b64_to_utf8(t) {
  return decodeURIComponent(escape(window.atob(t)));
}
function onErrorImage() {
  document.querySelectorAll("img").forEach(function (t) {
    t.onerror = function () {
      const e = "https://inkythuatso.com/uploads/thumbnails/800/2023/03/10-anh-dai-dien-trang-inkythuatso-03-15-27-10.jpg";
      if (
        (t.hasOwnProperty("errorCount") || (t.errorCount = 0),
        t.errorCount++,
        t.errorCount > 1)
      )
        return void (t.src = e);
      const o = document.querySelector('meta[name="csrf-token"]');
      o
        ? fetch("/ajax/get-fallback-image-url", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "X-CSRF-TOKEN": o.getAttribute("content"),
            },
            body: JSON.stringify({ imageUrl: t.src }),
          })
            .then((t) => {
              if (t.ok) return t.json();
              throw new Error("Failed to fetch fallback image URL");
            })
            .then((o) => {
              o.fallbackImageUrl ? (t.src = o.fallbackImageUrl) : (t.src = e);
            })
            .catch((o) => {
              console.error("An error occurred during the fetch request", o),
                (t.src = e);
            })
        : (t.src = e);
    };
  });
}
function sudoSlide(
  t = "",
  e = [],
  o = !0,
  n = !0,
  i = !0,
  a = 0,
  s = 0,
  r = 0,
  c = 0,
  d = "",
  l = []
) {
  const u = document.querySelector(`#${t}`);
  if (!u) return !1;
  u.querySelectorAll("img").forEach((t) => {
    t.addEventListener("dragstart", (t) => {
      t.preventDefault();
    });
  });
  var h = document.querySelector(`#${t} .s-content`);
  const p = (t) => t.split("/").pop().split(".").shift();
  if (h) {
    h.style.transform = "translateX(0px)";
    var m = document.querySelector(`#${t}`).parentNode.clientWidth,
      f = h.children,
      v = 0,
      $ = 0,
      g = 0;
    e.forEach(function (e, w) {
      let y = e.maxWidth,
        x = e.minWidth;
      if (m <= y && m > x) {
        if (
          (($ = e.qtyItem),
          (s = e.nextI || s),
          (v = (m / $) * f.length + (r * ($ - 1) * f.length) / (2 * $)),
          (h.style.width = `${v}px`),
          Array.from(f).forEach((t) => {
            (t.style.width = v / f.length - (r * ($ - 1)) / $ + "px"),
              (t.style.marginRight = `${r}px`);
          }),
          o)
        ) {
          u.insertAdjacentHTML(
            "beforeend",
            '<div class="nav"><div class="nav-next"></div><div class="nav-prev"></div></div>'
          );
          var b = u.querySelector(".nav-next"),
            _ = u.querySelector(".nav-prev");
          [b, _].forEach((t) => {
            t.addEventListener(
              "click",
              function () {
                t === b ? I(s || 1) : C(s || 1), i && (clearInterval(g), q());
              },
              { passive: !0 }
            );
          });
        }
        if (n) {
          let O = '<div class="dots">';
          c &&
            (O = `<div class="dots-custom"><div class="s-wrap" id="dot-custom-${t}"><div class="s-content">`);
          for (let M = 0; M <= Math.round((f.length - $) / s); M++) {
            let R = "";
            if (c) {
              let N = f[M].getAttribute(d);
              R =
                "data-text" == d
                  ? `\n                                    <div class="dot-custom">\n                                        <p>${N}</p>\n                                    </div>\n                                `
                  : `\n                                    <div class="dot-custom">\n                                        <img src="${N}" loading="lazy" alt="${p(
                      N
                    )}" width="80" height="80">\n                                    </div>\n                                `;
            }
            O += `<div class="dot dot-${M} ${
              0 == M ? "active" : ""
            }">${R}</div>`;
          }
          (O += "</div>"),
            c && (O += "</div></div>"),
            u.insertAdjacentHTML("beforeend", O),
            c && sudoSlide(`dot-custom-${t}`, l, !0, !1, !1, 5e3, 1, 0, 0);
          let j = document.querySelector(`#${t} .dot.active`),
            X = document.querySelectorAll(`#${t} .dot`);
          const D = () => {
            j.classList.remove("active"),
              (j = document.querySelector(`#${t} .dot-${k}`)),
              j && j.classList.add("active");
          };
          for (let z of X)
            z.addEventListener(
              "click",
              function (t) {
                var e = t.target;
                (dotClass = e.getAttribute("class")),
                  (dotIndex = dotClass.replace(/[^\d]+/g, "")),
                  dotIndex != k && ((k = dotIndex - 1), I(s)),
                  D();
              },
              { passive: !0 }
            );
        }
        var k = 0;
        function C(e) {
          k = Math.max(0, k - 1);
          let o = (v / f.length) * k * e;
          if (((h.style.transform = `translateX(${-o}px)`), n)) {
            let e = document.querySelector(`#${t} .dot.active`);
            document.querySelectorAll(`#${t} .dot`);
            e &&
              (e.classList.remove("active"),
              (e = document.querySelector(`#${t} .dot-${k}`)),
              e && e.classList.add("active"));
          }
          i && (clearInterval(g), q());
        }
        function I(e) {
          const o = Math.round((f.length - $) / e);
          k = k >= o ? 0 : k + 1;
          const a = (v / f.length) * Math.min(k * e, (f.length - $) / e);
          if (((h.style.transform = `translateX(${-a}px)`), n)) {
            let e = document.querySelector(`#${t} .dot.active`);
            document.querySelectorAll(`#${t} .dot`);
            e &&
              (e.classList.remove("active"),
              (e = document.querySelector(`#${t} .dot-${k}`)),
              e && e.classList.add("active"));
          }
          i && (clearInterval(g), q());
        }
        function q() {
          g = setInterval(() => I(s || 1), a);
        }
        i && q();
        let S,
          W,
          T,
          E = !1;
        const L = (t) => {
            if (2 === t.button) return !1;
            (S =
              "mousedown" === t.type
                ? t.pageX
                : t.changedTouches[t.changedTouches.length - 1].pageX),
              (E = !0);
          },
          P = (t) => {
            if (2 === t.button) return !1;
            if (
              ((W =
                "mouseup" === t.type
                  ? t.pageX
                  : t.changedTouches[t.changedTouches.length - 1].pageX),
              (E = !1),
              (checkHref = t.target.parentNode),
              S < W)
            )
              C(s || 1);
            else if (S > W) I(s || 1);
            else {
              let t = checkHref.getAttribute("data-href") || "";
              "" != t && (window.location.href = t);
            }
          },
          A = (t) => {
            (T = t.changedTouches[t.changedTouches.length - 1]),
              (S = T.pageX),
              (E = !0);
          },
          U = (t) => {
            if (
              ((T = t.changedTouches[t.changedTouches.length - 1]),
              (W = T.pageX),
              (E = !1),
              (checkHref = t.target.parentNode),
              S < W)
            )
              C(s || 1);
            else if (S > W) I(s || 1);
            else {
              let t = checkHref.getAttribute("data-href") || "";
              "" != t && (window.location.href = t);
            }
          };
        h.addEventListener("mousedown", L, { passive: !0 }),
          h.addEventListener("touchstart", A, { passive: !0 }),
          h.addEventListener("mouseup", P, { passive: !0 }),
          h.addEventListener("touchend", U, { passive: !0 });
      }
    });
  }
}
$.ajaxSetup({
  headers: { "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content") },
}),
  $(document).ready(function () {
    $("#loading_box").data("error");
    if (
      ($("body").on(
        "click",
        ".pagination__numbers .paginate_item",
        function () {
          let t = $(this).data("href");
          if (null == t || null == t || "" == t) return;
          var e = getUrlParameter(t, "page");
          pushOrUpdate({ page: e });
          let o = t.split("?")[0] || t;
          o = o.replace(/\/+$/, "");
          const n = o.split("/"),
            i = n.pop();
          /^page\d+$/.test(i) && (o = n.join("/")),
            (o = o + "/page" + e + "/"),
            update_url(o),
            loadData("", "", "", !1);
        }
      ),
      $("body").on("keydown", ".form-search form input", function (t) {
        if ("Enter" === t.key) {
          t.preventDefault();
          setCookie(
            "keyword",
            utf8_to_b64($(this).closest("form").find("input").val()),
            10
          ),
            (window.location.href = $(this).closest("form").attr("action"));
        }
      }),
      $("body").on(
        "click",
        ".form-search form button, .widget-search__form button",
        function (t) {
          t.preventDefault();
          setCookie(
            "keyword",
            utf8_to_b64($(this).closest("form").find("input").val()),
            10
          ),
            (window.location.href = $(this).closest("form").attr("action"));
        }
      ),
      $(".form-control").on("click keyup", function (t) {
        $(this).parent().find(".err_show").removeClass("active");
      }),
      $("body").on("click", "#copy_link", function (t) {
        t.preventDefault(), copyText($(this).data("link"));
      }),
      $("body .ck-content iframe").length &&
        setTimeout(function () {
          $("body .ck-content iframe").each(function () {
            let t = $(this).data("src");
            $(this).attr("src", t), $(this).parent().addClass("text-center");
          });
        }, 5e3),
      $("body").on("click", ".widget-menu__list .icon-down", function (t) {
        t.preventDefault(), $(this).closest("li").find("> ul").slideToggle();
      }),
      $("body").on("click", ".toast-close", function (t) {
        $("#toast-container").css("display", "none");
      }),
      $(".toast-top-right.show_fade").length > 0)
    ) {
      let t = $(".toast-top-right.show_fade").data("delay");
      null == t && (t = 1e3),
        setTimeout(function () {
          $(".toast-top-right.show_fade").css("display", "block");
        }, t),
        setTimeout(function () {
          $("#toast-container").css("display", "none");
        }, t + 6e3);
    }
    $(".faq-short .item-question").click(function () {
      $(".faq-short .item-question.active").is($(this)) ||
        ($(".faq-short .item-question.active")
          .parent()
          .find(".item-answer")
          .slideUp(),
        $(".faq-short .item-question.active").removeClass("active")),
        $(this).hasClass("active")
          ? $(this).removeClass("active")
          : $(this).addClass("active"),
        $(this).parent().find(".item-answer").slideToggle();
    }),
      $("body").on("click", "*[open-data_video]", function () {
        const t = `\n            <div class="popup active flex-center" style="padding: 0;cursor: pointer;max-width: 100%; background:rgba(0,0,0,0.6); z-index: 9999; top: 0; left: 0; right: 0; bottom: 0;transform: none">\n                <p class="popup-video__close" title="Close" style="position: absolute;right: 2rem;top: 1rem;cursor: pointer;"><svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M14.4497 3.16142L3.81641 13.8379" stroke="#ffffff" stroke-width="2" stroke-linecap="square"></path>\n                    <path d="M4.18307 3.16142L14.8164 13.8379" stroke="#ffffff" stroke-width="2" stroke-linecap="square"></path>\n                </svg></p>\n                <div class="popup-video" style="width: 50%">\n                    <iframe src="${$(
          this
        ).data(
          "video"
        )}" width="100%" height="500"/>\n                </div>\n            </div>\n        `;
        $("body").append(t);
      }),
      $("body").on("click", "*[open-form__data]", function () {
        const t = $(this).data("form"),
          e = JSON.stringify($(this).data("value"));
        $(`#${t}`).length &&
          ($(`#${t}`).find(".hidden_datas").remove(),
          $(`#${t}`)
            .find("form")
            .append(
              `<input name="datas" class="hidden_datas" value='${e}' type="hidden">`
            ),
          $(`#${t}`).addClass("active"));
      }),
      $(window).scroll(function () {
        const t = $(window).outerHeight();
        $(this).scrollTop() > t / 3
          ? $(".cta .backtop").addClass("active")
          : $(".cta .backtop").removeClass("active");
      }),
      $("body").on("click", ".cta .backtop", function () {
        $("html, body").animate({ scrollTop: 0 }, 500);
      });
    var t = $("#single-content");
    t.length > 0 && t.height() < 1080 && $(".btn-show-detail").hide();
    0 === t.find(".btn-show-detail").length && t.css("max-height", "100%"),
      $("body").on("click", ".btn-show-detail button", function () {
        var t = $(this).data("view-more"),
          e = $(this).data("hide-partially");
        $("#single-content").toggleClass("active");
        var o = $("#single-content").hasClass("active"),
          n = o ? e : t,
          i = o
            ? "M11 8.414V18h2V8.414l4.293 4.293 1.414-1.414L12 4.586l-6.707 6.707 1.414 1.414z"
            : "m18.707 12.707-1.414-1.414L13 15.586V6h-2v9.586l-4.293-4.293-1.414 1.414L12 19.414z";
        $(this).find("span").text(n), $(this).find("svg path").attr("d", i);
      }),
      $("body").on(
        "click",
        ".call-action .show-type__3 .box-control .open-item",
        function () {
          $(this).removeClass("active"),
            $(this).parent().find(".close-item").addClass("active"),
            $(this).parent().parent().addClass("active");
        }
      ),
      $("body").on(
        "click",
        ".call-action .show-type__3 .box-control .close-item",
        function () {
          $(this).removeClass("active"),
            $(this).parent().find(".open-item").addClass("active"),
            $(this).parent().parent().removeClass("active");
        }
      ),
      $("body").on(
        "click",
        ".call-action .show-type__3 .overlay-type__3",
        function () {
          $(this)
            .parent()
            .find(".box-control .close-item")
            .removeClass("active"),
            $(this).parent().find(".box-control .open-item").addClass("active"),
            $(this).parent().removeClass("active");
        }
      );
  }),
  $(document).mouseup(function (t) {
    var e = $(".popup-video");
    e.is(t.target) || 0 !== e.has(t.target).length || e.parent().remove();
  }),
  $(document).mouseup(function (t) {
    var e = $(".popup-wrap__form");
    e.is(t.target) ||
      0 !== e.has(t.target).length ||
      $(t.target).hasClass("open-form__data") ||
      e.closest(".popup").removeClass("active");
  }),
  (window.copyText = copyText),
  (window.validForm = validForm),
  (window.setCookie = setCookie),
  (window.isEmail = isEmail),
  (window.isPhone = isPhone),
  (window.loadingBox = loadingBox),
  (window.alert_show = alert_show),
  (window.update_url = update_url),
  (window.update_input_url = update_input_url),
  (window.getUrlParameter = getUrlParameter),
  (window.pushOrUpdate = pushOrUpdate),
  (window.checkEmpty = checkEmpty),
  (window.loadAjaxGetPaginate = loadAjaxGetPaginate),
  (window.loadData = loadData),
  (window.closePopup = closePopup),
  (window.openPopup = openPopup),
  (window.utf8_to_b64 = utf8_to_b64),
  (window.b64_to_utf8 = b64_to_utf8),
  (window.onErrorImage = onErrorImage),
  document.addEventListener("DOMContentLoaded", function () {
    onErrorImage();
  }),
  $(document).ready(function () {
    $(".short_code.slider").each(function (t) {
      let e = $(this).find(".s-wrap").attr("id"),
        o = !1,
        n = !0,
        i = !0;
      parseInt($(this).find(".s-wrap").data("autoplay")) && (o = !0),
        parseInt($(this).find(".s-wrap").data("nav")) || (n = !1),
        parseInt($(this).find(".s-wrap").data("dot")) || (i = !1),
        sudoSlide(
          e,
          [{ maxWidth: 99999999999999, minWidth: 0, qtyItem: 1, nextItem: 1 }],
          n,
          i,
          o,
          5e3,
          1,
          0
        );
    }),
      $(".short-product__content.s-wrap").each(function (t) {
        sudoSlide(
          $(this).attr("id"),
          [
            {
              maxWidth: 99999999999999,
              minWidth: 1024,
              qtyItem: 5,
              nextItem: 1,
            },
            { maxWidth: 1024, minWidth: 767, qtyItem: 4, nextItem: 1 },
            { maxWidth: 767, minWidth: 576, qtyItem: 3, nextItem: 1 },
            { maxWidth: 576, minWidth: 0, qtyItem: 2, nextItem: 1 },
          ],
          !0,
          !0,
          !1,
          5e3,
          1,
          0
        );
      }),
      $(".post-slide-short .s-wrap").each(function (t) {
        sudoSlide(
          $(this).attr("id"),
          [
            {
              maxWidth: 99999999999999,
              minWidth: 992,
              qtyItem: 3,
              nextItem: 1,
            },
            { maxWidth: 992, minWidth: 767, qtyItem: 2, nextItem: 1 },
            { maxWidth: 767, minWidth: 576, qtyItem: 2, nextItem: 1 },
            { maxWidth: 576, minWidth: 0, qtyItem: 1, nextItem: 1 },
          ],
          !0,
          !1,
          !1,
          5e3,
          1,
          30
        );
      }),
      sudoSlide(
        "customer-reviews__slide",
        [
          { maxWidth: 99999999999999, minWidth: 992, qtyItem: 3, nextItem: 1 },
          { maxWidth: 992, minWidth: 767, qtyItem: 2, nextItem: 1 },
          { maxWidth: 767, minWidth: 0, qtyItem: 1, nextItem: 1 },
        ],
        !1,
        !1,
        !0,
        5e3,
        1,
        30
      ),
      sudoSlide(
        "partner__slide",
        [
          { maxWidth: 99999999999999, minWidth: 992, qtyItem: 6, nextItem: 1 },
          { maxWidth: 992, minWidth: 767, qtyItem: 4, nextItem: 1 },
          { maxWidth: 767, minWidth: 576, qtyItem: 3, nextItem: 1 },
          { maxWidth: 576, minWidth: 0, qtyItem: 2, nextItem: 1 },
        ],
        !1,
        !1,
        !1,
        5e3,
        1,
        0
      ),
      sudoSlide(
        "slide-customre__review",
        [{ maxWidth: 99999999999999, minWidth: 0, qtyItem: 1, nextItem: 1 }],
        !1,
        !1,
        !1,
        5e3,
        1,
        0
      );
  });
