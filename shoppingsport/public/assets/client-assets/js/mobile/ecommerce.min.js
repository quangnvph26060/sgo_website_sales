(() => {
    function t(t) {
        var o =
                arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0,
            a =
                arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 1,
            n =
                arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : "add";
        loadingBox("open");
        var r = $("#loading_box").data("error");
    }
    function e(t) {
        $(".notice-cart span.name").text(t),
            $(".notice-cart").addClass("active"),
            setTimeout(function () {
                $(".notice-cart").removeClass("active"),
                    $(".notice-cart span.name").text("");
            }, 5e3);
    }
    $(document).ready(function () {
        $("body").on("click", ".notice-cart .close", function (t) {
            $(this).closest(".notice-cart").removeClass("active");
        }),
            $("body").on("click", ".btn-add__cart", function (e) {
                var o = $('input[name="variant_id"]').val(),
                    a = $('input[name="quantity"]').val(),
                    n = $(this).data("location");
                ($(this).closest(".content-bottom").length ||
                    $(this).closest(".mobile-item").length ||
                    $(this).hasClass("in-slide") ||
                    $(this).hasClass("builder-element")) &&
                    ((o = $(this).data("variant_id")), (a = 1)),
                    !$(".variant-list").length ||
                    !$(this).closest(".cart").length ||
                    (null != o && null != o && "" != o)
                        ? t($(this).data("id"), o, a, n)
                        : alert_show("error", $(this).data("require"));
            });
    }),
        (window.addToCart = t),
        (window.cartSuccess = e);
})(),
    (() => {
        function t(t) {
            navigator.geolocation
                ? (loadingBox("open"),
                  navigator.geolocation.getCurrentPosition(e, o, {
                      timeout: 1e4,
                  }))
                : alert_show("error", t);
        }
        function e(t) {
            var e = t.coords.latitude,
                o = t.coords.longitude;
            console.log("Latitude: " + e),
                console.log("Longitude: " + o),
                $.get(
                    "https://nominatim.openstreetmap.org/reverse?format=json&lat=" +
                        e +
                        "&lon=" +
                        o +
                        "&zoom=18&addressdetails=1"
                )
                    .done(function (t) {
                        t.address
                            ? (console.log(t.address), a(t))
                            : loadingBox("close");
                    })
                    .fail(function () {
                        alert_show("error", errorMessage);
                    });
        }
        function o(t) {
            loadingBox("close"),
                alert_show(
                    "error",
                    {
                        1: "Permission denied",
                        2: "Position unavailable",
                        3: "Request timeout",
                    }[t.code]
                );
        }
        function a(t) {
            var e = t.address,
                o = "",
                a = e.house_number || "",
                n = e.road || "";
            (o = a + " " + n).trim() || (o = t.name || t.display_name);
            var r = e.suburb || e.town,
                i = e.city || e.county,
                s = e.state,
                c = {
                    houseNumber: a,
                    road: n,
                    ward: r,
                    district: (i = i ? i.replace("District", "").trim() : ""),
                    province: (s = s ? s.replace("Province", "").trim() : ""),
                };
            $.ajax({
                headers: {
                    "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr(
                        "content"
                    ),
                },
                type: "post",
                url: "/ajax/get-location",
                data: c,
                success: function (t) {
                    loadingBox("close"),
                        1 == t.status
                            ? (t.province &&
                                  ($("#customer_province_id").text(
                                      t.province && t.province.name
                                          ? t.province.name
                                          : ""
                                  ),
                                  $('input[name="province_id"]').val(
                                      t.province && t.province.id
                                          ? t.province.id
                                          : ""
                                  )),
                              t.district &&
                                  ($("#customer_district_id").text(
                                      t.district && t.district.name
                                          ? t.district.name
                                          : ""
                                  ),
                                  $('input[name="district_id"]').val(
                                      t.district && t.district.id
                                          ? t.district.id
                                          : ""
                                  )),
                              t.district &&
                                  t.district.id &&
                                  $('input[name="shipping_method"]').trigger(
                                      "change"
                                  ),
                              t.ward &&
                                  ($("#customer_ward_id").text(
                                      t.ward && t.ward.name ? t.ward.name : ""
                                  ),
                                  $('input[name="ward_id"]').val(
                                      t.ward && t.ward.id ? t.ward.id : ""
                                  )),
                              $("#input-address").val(o),
                              alert_show("success", t.message))
                            : alert_show("error", t.message);
                },
                error: function (t) {
                    loadingBox("close"), alert_show("error", errorMessage);
                },
            });
        }
        $.ajaxSetup({
            headers: {
                "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
            },
        }),
            $(document).ready(function () {
                var e = $("#loading_box").data("error");
                $("body").on("click", "#compare-close", function (t) {
                    $("#show_compare").css("display", "none");
                }),
                    $("body").on(
                        "click",
                        ".product-buttons__wishlist",
                        function (t) {
                            var o = $(this).data("id"),
                                a = $(this).data("type") || "add";
                            if (window.width() < 768) {
                                $.ajax({
                                    headers: {
                                        "X-CSRF-TOKEN": $(
                                            'meta[name="csrf-token"]'
                                        ).attr("content"),
                                    },
                                    type: "post",
                                    url: "/ajax/wishlist",
                                    data: { id: o, type: a },
                                    success: function (t) {
                                        alert_show(t.status, t.message),
                                            "remove" == a &&
                                                ($("#listdata").html(t.html),
                                                $(".pagination")
                                                    .empty()
                                                    .append(t.pagination),
                                                0 == t.count_product &&
                                                    window.location.reload()),
                                            $(
                                                ".wishlist_products_counter_number"
                                            ).text(t.count);
                                    },
                                    error: function (t) {
                                        alert_show("error", e);
                                    },
                                });
                            }
                        }
                    ),
                    $("body").on(
                        "click",
                        "*[data-form] *[type=submit]",
                        function (t) {
                            t.preventDefault(), t.stopImmediatePropagation();
                            var o = $(this).closest("form"),
                                a = o.attr("id");
                            validForm(a) &&
                                ("ajax" == o.data("form")
                                    ? $.ajax({
                                          headers: {
                                              "X-CSRF-TOKEN": $(
                                                  'meta[name="csrf-token"]'
                                              ).attr("content"),
                                          },
                                          type: "post",
                                          url: o.attr("action"),
                                          data: o.serialize(),
                                          beforeSend: function () {
                                              loadingBox();
                                          },
                                          success: function (t) {
                                              if (
                                                  (loadingBox("close"),
                                                  1 == t.status)
                                              ) {
                                                  if (
                                                      (o.find("input").val(""),
                                                      o
                                                          .find("textarea")
                                                          .val(""),
                                                      alert_show(
                                                          "success",
                                                          t.message
                                                      ),
                                                      null != t.action &&
                                                          "register" ==
                                                              t.action &&
                                                          "" != t.html)
                                                  )
                                                      return (
                                                          $("#register_row")
                                                              .empty()
                                                              .change(),
                                                          $("#register_row")
                                                              .append(t.html)
                                                              .change(),
                                                          !1
                                                      );
                                                  if (t.hasOwnProperty("url"))
                                                      return void (window.location.href =
                                                          t.url);
                                                  1 == o.data("append") &&
                                                      $.each(
                                                          t.data,
                                                          function (t, e) {
                                                              console.log(t, e),
                                                                  o
                                                                      .find(
                                                                          'input[name="'.concat(
                                                                              t,
                                                                              '"]'
                                                                          )
                                                                      )
                                                                      .val(e);
                                                          }
                                                      ),
                                                      1 == o.data("reload") &&
                                                          setTimeout(
                                                              function () {
                                                                  window.location.reload();
                                                              },
                                                              5e3
                                                          );
                                              } else if (
                                                  (alert_show(
                                                      "error",
                                                      t.message
                                                  ),
                                                  null != t.action &&
                                                      "login" == t.action)
                                              )
                                                  return (
                                                      "notFound" ==
                                                      t.type_action
                                                          ? $(
                                                                'input[name="username"]'
                                                            ).css(
                                                                "border-color",
                                                                "red"
                                                            )
                                                          : "errorAcount" ==
                                                                t.type_action &&
                                                            $(
                                                                'input[name="username"], input[name="password"]'
                                                            ).css(
                                                                "border-color",
                                                                "red"
                                                            ),
                                                      !1
                                                  );
                                          },
                                          error: function (t) {
                                              loadingBox("close"),
                                                  alert_show("error", e);
                                          },
                                      })
                                    : (loadingBox("open"), o.submit()));
                        }
                    ),
                    $("body").on("click", ".btn-logout", function (t) {
                        $.ajax({
                            type: "post",
                            url: "/ajax/user/logout",
                            success: function (t) {
                                window.location.href = t.route;
                            },
                            error: function (t) {
                                alert_show("error", e);
                            },
                        });
                    }),
                    $("#pending_accept_payment").change(function () {
                        $(".form-accept_payment").slideToggle(this.checked);
                    }),
                    $("body").on("click", ".payment-guide_title", function (t) {
                        t.preventDefault(),
                            $(this).toggleClass("active"),
                            $(this)
                                .next(".payment-guide-content")
                                .slideToggle();
                    }),
                    $("body").on("click", ".btn-confirm-payment", function (t) {
                        t.preventDefault();
                        var o = $(this).closest("form"),
                            a = o.attr("action"),
                            n = o.attr("id");
                        if (validForm(n, "input-field")) {
                            form_data = new FormData();
                            var r = $(this).data("order-id"),
                                i = o.find('input[name="file"]')[0],
                                s = o.find('input[name="orderIdHash"]').val(),
                                c = o
                                    .find(
                                        'textarea[name="g-recaptcha-response"]'
                                    )
                                    .val();
                            form_data.append("file", i.files[0]),
                                form_data.append("orderID", r),
                                form_data.append("orderIdHash", s),
                                form_data.append("g-recaptcha-response", c),
                                $.ajax({
                                    headers: {
                                        "X-CSRF-TOKEN": $(
                                            'meta[name="csrf-token"]'
                                        ).attr("content"),
                                    },
                                    type: "POST",
                                    url: a,
                                    data: form_data,
                                    enctype: "multipart/form-data",
                                    processData: !1,
                                    contentType: !1,
                                    dataType: "json",
                                    beforeSend: function () {
                                        loadingBox();
                                    },
                                    success: function (t) {
                                        1 == t.status
                                            ? (alert_show("success", t.message),
                                              setTimeout(function () {
                                                  window.location.reload();
                                              }, 2e3))
                                            : alert_show("error", t.message),
                                            loadingBox("close");
                                    },
                                    error: function (t) {
                                        alert_show("error", e),
                                            loadingBox("close");
                                    },
                                });
                        }
                    }),
                    $("body").on("click", ".btn-get-location", function (e) {
                        e.preventDefault(), t($(this).data("not-support"));
                    });
            }),
            (window.getLocation = t),
            (window.geoLocationSuccess = e),
            (window.geoLocationError = o),
            (window.loadLocation = a),
            setInterval(function () {
                $(".countdown-data").each(function () {
                    var t = $(this).data("end"),
                        e = new Date(),
                        o = t - Math.floor(e.getTime() / 1e3),
                        a = (hours = minutes = seconds = 0);
                    if (o > 0) {
                        var n = parseInt(o, 10);
                        (a = Math.floor(n / 86400)),
                            (hours = Math.floor(n / 3600) % 24),
                            (minutes = Math.floor(n / 60) % 60),
                            (seconds = n % 60),
                            seconds < 10 && (seconds = "0" + seconds),
                            minutes < 10 && (minutes = "0" + minutes);
                    }
                    $(this)
                        .find(".days")
                        .text(a < 10 ? "0" + a : a),
                        $(this)
                            .find(".hours")
                            .text(hours < 10 ? "0" + hours : hours),
                        $(this).find(".minutes").text(minutes),
                        $(this).find(".seconds").text(seconds);
                });
            }, 1e3),
            (window.addCompare = function (t, e, o, a, n) {
                $.ajax({
                    headers: {
                        "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr(
                            "content"
                        ),
                    },
                    url: "/ajax/add-compare",
                    type: "POST",
                    data: { id: t, name: e, image: o, price: a, cate_id: n },
                    beforeSend: function () {},
                    success: function (t) {
                        $("#show_compare").empty(),
                            $("#show_compare").append(t.html),
                            $("#show_compare").css("display", "block"),
                            1 == t.status ||
                                alert_show((type = "error"), t.message);
                    },
                    error: function (t) {
                        alert_show("error", errorMessage);
                    },
                });
            }),
            (window.removeCompare = function (t) {
                var e =
                    arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : "single";
                $.ajax({
                    headers: {
                        "X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr(
                            "content"
                        ),
                    },
                    url: "/ajax/remove-compare",
                    type: "POST",
                    data: { id: t, page: e },
                    beforeSend: function () {},
                    success: function (t) {
                        "compare" == e && (window.location.href = t.link),
                            $("#show_compare").empty(),
                            $("#show_compare").append(t.html),
                            $("#show_compare").css("display", "block");
                    },
                    error: function (t) {
                        alert_show("error", errorMessage);
                    },
                });
            });
    })();
