(() => {
    function t(t, e) {
        var a = $("#current_url").val();
        update_url(window.currentUrl), (string = t + "=" + e);
        var s = "",
            i = "";
        if (
            (-1 != a.lastIndexOf("&page") && (a = (a = a.split("&page"))[0]),
            -1 != a.lastIndexOf("?page") && (a = (a = a.split("?page"))[0]),
            "orderby" == t &&
                $(".sort.str .sort-list__item").removeClass("active"),
            "perpage" == t &&
                $(".paginate .sort-list__item").removeClass("active"),
            -1 != a.lastIndexOf(t))
        )
            if (
                -1 == a.lastIndexOf(string) ||
                ("orderby" != t &&
                    "price" != t &&
                    "perpage" != t &&
                    "instock" != t &&
                    "onsale" != t &&
                    "filter[]" != t &&
                    "brand[]" != t &&
                    "category[]" != t)
            )
                if (
                    ("filter[]" == t && $(".fil_" + e).addClass("active"),
                    "brand[]" == t && $(".brand_" + e).addClass("active"),
                    "category[]" == t && $(".category_" + e).addClass("active"),
                    "orderby" == t ||
                        "perpage" == t ||
                        "price" == t ||
                        "instock" == t ||
                        "onsale" == t)
                ) {
                    var r = (s = a.split(t))[1].split("&");
                    (i =
                        null != r[1]
                            ? s[0] + string + "&" + r[1]
                            : s[0] + string),
                        $(".".concat(t, "_").concat(e)).addClass("active");
                } else
                    i =
                        -1 != a.lastIndexOf("?")
                            ? a + "&" + string
                            : a + "?" + string;
            else
                (s = (s = (s = a.replace("?" + string + "&", "?")).replace(
                    "&" + string,
                    ""
                )).replace("?" + string, "")),
                    "filter[]" == t && $(".fil_" + e).removeClass("active"),
                    "brand[]" == t && $(".brand_" + e).removeClass("active"),
                    "category[]" == t &&
                        $(".category_" + e).removeClass("active"),
                    ("orderby" != t &&
                        "perpage" != t &&
                        "instock" != t &&
                        "onsale" != t) ||
                        $(".".concat(t, "_").concat(e)).removeClass("active"),
                    (i = s);
        else {
            if ("filter[]" == t) $(".fil_" + e).addClass("active");
            "brand[]" == t && $(".brand_" + e).addClass("active"),
                "category[]" == t && $(".category_" + e).addClass("active"),
                ("orderby" != t &&
                    "perpage" != t &&
                    "instock" != t &&
                    "onsale" != t) ||
                    $(".".concat(t, "_").concat(e)).addClass("active"),
                (i =
                    -1 != a.lastIndexOf("?")
                        ? a + "&" + string
                        : a + "?" + string);
        }
        $("#current_url").val(i), loadData("", "products", "", !1);
    }
    function e(t, e, a, s) {
        $.extend(0, e),
            $.extend(",", a),
            $.extend(".", s),
            (t = (t + "").replace(/[^0-9+\-Ee.]/g, ""));
        var i = isFinite(+t) ? +t : 0,
            r = isFinite(+e) ? Math.abs(e) : 0,
            l = void 0 === s ? "," : s,
            n = void 0 === a ? "." : a,
            o = "";
        return (
            (o = (
                r
                    ? (function (t, e) {
                          var a = Math.pow(10, e);
                          return "" + (Math.round(t * a) / a).toFixed(e);
                      })(i, r)
                    : "" + Math.round(i)
            ).split(".")),
            o[0].length > 3 &&
                (o[0] = o[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, l)),
            (o[1] || "").length < r &&
                ((o[1] = o[1] || ""),
                (o[1] += new Array(r - o[1].length + 1).join("0"))),
            o.join(n)
        );
    }
    $(document).ready(function () {
            var a = $(".filter-box__content .from").data("min"),
                s = $(".filter-box__content .to").data("max");

            $("#slider-range").slider({
                range: !0,
                min: 1e4,
                max: 1e7,
                step: 1e4,
                values: [a, s],
                slide: function (t, a) {
                    $(".filter-box__content .from")
                        .data("value", a.values[0])
                        .text(e(a.values[0], 0, ",")),
                        $(".filter-box__content .to")
                            .data("value", a.values[1])
                            .text(e(a.values[1], 0, ","));
                },
            });

        $("body").on("click", ".filter-box__title", function (t) {
            $(this).toggleClass("active"),
                $(this).parent().find(".filter-box__list").slideToggle();
        }),
            $("body").on("click", ".filter-box__content .filter", function (e) {
                $(this).toggleClass("active");
                var a = $(".filter-box__content .from").data("value"),
                    s = $(".filter-box__content .to").data("value");
                t("price", "".concat(a, "_").concat(s));
            }),
            $("body").on("click", ".filter-box__list .icon-down", function (t) {
                $(this).parent().toggleClass("toggle"),
                    $(this).parent().find(" > ul").slideToggle();
            }),
            $("body").on("click", ".sort-title", function (t) {

                $(this).parent().toggleClass("active");
            }),
            $("body").on("click", ".sort-list__item", function (t) {
                if ($(this).hasClass("active")) {
                    var e = $(this).text();
                    $(this).closest(".sort").find(".sort-title__value").text(e);
                } else {
                    var a = $(this).parent().find(" > li:first-child").text();
                    $(this).closest(".sort").find(".sort-title__value").text(a);
                }
            }),
            $("body").on("click", ".datas-top__wrap .icon", function (t) {
                $(".datas-top__wrap .icon").removeClass("active"),
                    $(this).addClass("active"),
                    $(this).hasClass("grid")
                        ? $(this)
                              .closest(".datas")
                              .find(".product")
                              .addClass("flex-center-left column-4")
                              .removeClass("list")
                        : $(this)
                              .closest(".datas")
                              .find(".product")
                              .removeClass("flex-center-left column-4")
                              .addClass("list");
            });
    }),
        $(document).mouseup(function (t) {
            var e = $(".sort-list");
            e.is(t.target) ||
                0 !== e.has(t.target).length ||
                $(t.target).hasClass("sort-title") ||
                e.parent().removeClass("active");
        }),
        (window.loadUrl = t),
        (window.format_price = e);
})();
