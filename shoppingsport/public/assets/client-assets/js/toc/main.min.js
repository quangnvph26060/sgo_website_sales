function convertToSlug(e) {
    return e
        .toLowerCase()
        .replace(/ /g, "-")
        .replace(/[^\w-]+/g, "");
}
function generateToc() {
    $(".mce-toc").find("ul li").length && $(".mce-toc").remove(),
        $(".sudo-toc").find("ul li").length && $(".sudo-toc").remove();
    const e = document.getElementById("single-content");
    if (!e)
        return void console.error(
            'KhĂ´ng tĂ¬m tháº¥y tháº» "single-content" trong vÄƒn báº£n.'
        );
    const t = e.querySelectorAll("h2, h3"),
        n = document.createElement("ul");
    let o = null,
        l = null,
        c = !1;
    for (let e = 0; e < t.length; e++) {
        const i = t[e],
            s = i.textContent;
        i.id ? (i.id = convertToSlug(i.id) + "-" + e) : (i.id = "heading-" + e);
        if ("h2" == i.nodeName.toLowerCase()) {
            const e = document.createElement("li"),
                t = document.createElement("a");
            (t.textContent = s),
                (t.href = "#" + i.id),
                t.setAttribute("data-scroll", "#" + i.id),
                e.classList.add("content-heading"),
                e.appendChild(t),
                n.appendChild(e);
            const a = document.createElement("div");
            a.classList.add("toc-list__child"),
                e.appendChild(a),
                (o = i),
                (l = a),
                (c = !0);
        } else if (!1 === c) {
            const e = document.createElement("li"),
                t = document.createElement("a");
            (t.textContent = s),
                (t.href = "#" + i.id),
                t.setAttribute("data-scroll", "#" + i.id),
                e.appendChild(t),
                n.appendChild(e);
        } else if (o && l && s) {
            const e = document.createElement("div"),
                t = document.createElement("a");
            (t.textContent = s),
                (t.href = "#" + i.id),
                t.setAttribute("data-scroll", "#" + i.id),
                e.appendChild(t),
                l.appendChild(e);
        }
    }
    const i = `<div id="toc-lists__header" class="toc-lists__header flex-center-between">\n        <div class="flex-center-left">\n            <span class="icon">\n                <svg xmlns="http://www.w3.org/2000/svg" height="1.3em" viewBox="0 0 512 512"><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg>            </span>\n            <p>${$(
        "#single-content"
    ).data(
        "title"
    )}</p>\n        </div>\n        <p class="close" aria-label="Expand or collapse"></p>\n        </div>`;
    if (0 !== n.childNodes.length) {
        const t = document.createElement("div");
        t.classList.add("toc-lists"),
            (t.id = "toc-lists"),
            (t.innerHTML = i),
            t.appendChild(n);
        const o = e.querySelector("h2"),
            l = e.querySelector("h3");
        1 == positionToc
            ? o
                ? $(o).before(t)
                : l && $(l).before(t)
            : 2 == positionToc
            ? o
                ? $(o).after(t)
                : l && $(l).after(t)
            : 3 == positionToc
            ? $("#single-content").prepend(t)
            : 4 == positionToc && $("#single-content").append(t);
    }
    document
        .querySelectorAll("#toc-lists .content-heading")
        .forEach(function (e) {
            const t = e.querySelector(".toc-list__child");
            if (t && t.hasChildNodes()) {
                const t = document.createElement("p");
                t.classList.add("after-icon"), e.insertBefore(t, e.firstChild);
            }
        });
}
function isParentHeading(e) {
    return /^\d+[\.\-\+]\s/.test(e);
}
function checkEmpty(e) {
    return null == e || "null" == e || null == e || "" == e;
}
generateToc(),
    $("body").on("click", "*[data-scroll]", function (e) {
        e.preventDefault(),
            (id = $(this).data("scroll")),
            (offset_top = $(this).data("top")),
            checkEmpty(offset_top)
                ? (offset_top = $(id).offset().top)
                : (offset_top = $(id).offset().top - offset_top),
            $("html, body").animate({ scrollTop: offset_top - 80 }, 500);
    }),
    $("body").on("click", "#toc-lists p.close", function (e) {
        e.preventDefault(),
            $(this).toggleClass("active"),
            $(this).closest("#toc-lists").find("> ul").slideToggle();
    }),
    $("body").on("click", ".content-heading .after-icon", function (e) {
        e.preventDefault(),
            $(this).toggleClass("active"),
            $(this)
                .closest(".content-heading")
                .find(".toc-list__child")
                .slideToggle();
    });
